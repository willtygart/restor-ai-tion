<!DOCTYPE html>
<html>
<head>
    <title>Restor-AI Knowledge Base Admin</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        textarea { width: 100%; height: 200px; margin: 10px 0; }
        button { background: #667eea; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #5a6fd8; }
    </style>
</head>
<body>
    <h1>ðŸ”§ Restor-AI Knowledge Base Admin</h1>
    
    <div class="section">
        <h2>Water Damage Knowledge</h2>
        <textarea id="waterDamage" placeholder="Enter water damage restoration information..."></textarea>
        <button onclick="updateKnowledge('water-damage')">Update Water Damage KB</button>
    </div>
    
    <div class="section">
        <h2>Mold Remediation Knowledge</h2>
        <textarea id="moldRemediation" placeholder="Enter mold remediation information..."></textarea>
        <button onclick="updateKnowledge('mold-remediation')">Update Mold KB</button>
    </div>
    
    <div class="section">
        <h2>Fire Damage Knowledge</h2>
        <textarea id="fireDamage" placeholder="Enter fire damage restoration information..."></textarea>
        <button onclick="updateKnowledge('fire-damage')">Update Fire Damage KB</button>
    </div>
    
    <script>
        async function updateKnowledge(category) {
            const content = document.getElementById(category.replace('-', '')).value;
            
            try {
                const response = await fetch('/api/knowledge-base', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ category, content })
                });
                
                if (response.ok) {
                    alert('Knowledge base updated successfully!');
                } else {
                    alert('Failed to update knowledge base');
                }
            } catch (error) {
                alert('Error updating knowledge base: ' + error.message);
            }
        }
        
        // Load existing knowledge on page load
        window.onload = async function() {
            try {
                const response = await fetch('/api/knowledge-base');
                const kb = await response.json();
                
                // Populate textareas with existing content
                if (kb['water-damage']) document.getElementById('waterDamage').value = kb['water-damage'];
                if (kb['mold-remediation']) document.getElementById('moldRemediation').value = kb['mold-remediation'];
                if (kb['fire-damage']) document.getElementById('fireDamage').value = kb['fire-damage'];
            } catch (error) {
                console.error('Failed to load knowledge base:', error);
            }
        };
    </script>
</body>
</html>
